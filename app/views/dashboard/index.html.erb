<% provide(:title, "Dashboard")%>
<div class="container">
  <h1>Dashboard</h1>
  <div class="section">
    <h3>List of Toys</h3>

    <table class="table">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Description</th>
          <th scope="col">Date Created</th>
           <th scope="col">Owner</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <% @toys.each do |toy| %>
        <tr>
          <td><%= link_to toy.name, toy_path(toy)%></td>
          <td><%= toy.description.truncate(50) %></td>
          <td><%= toy.updated_at.strftime("%B %d, %Y") %></td>
          <td><%= toy.user.name %></td>
          <td>
            <%= link_to "Edit", edit_toy_path(toy), class: "btn btn-warning" %>
            <%= link_to "Delete", toy, class: "btn btn-danger",  data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}  %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
    <%= will_paginate @toys%>
  </div>

  <div class="section">
    <h3>List of Users</h3>

    <table class="table">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Description</th>
          <th scope="col">Date Created</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
        <tr>
          <td><%= link_to user.name, user %></td>
          <td><%= user.email %></td>
          <td><%= user.created_at.strftime("%B %d, %Y") %></td>
          <td>
            <%= link_to "Edit", edit_user_path(user), class:"btn btn-warning"%>
            <%= link_to "Delete", user, class: "btn btn-danger",  data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}  %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
    <%= will_paginate @users %>
  </div>
</div>